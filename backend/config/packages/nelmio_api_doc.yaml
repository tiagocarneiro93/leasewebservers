nelmio_api_doc:
    documentation:
        info:
            title: Leaseweb Server API
            description: REST API for listing and filtering servers
            version: 1.0.0
        servers:
            - url: /
              description: API server
        tags:
            - name: Servers
              description: Server management endpoints
            - name: Filters
              description: Filter options endpoints
        paths:
            /api/servers:
                get:
                    operationId: api_servers_index
                    summary: Get list of servers
                    description: Returns a paginated list of servers with optional filtering
                    tags:
                        - Servers
                    parameters:
                        - name: storage[]
                          in: query
                          description: Storage range filter (e.g., 0-250GB, 250GB-500GB, 500GB-1TB)
                          required: false
                          schema:
                              type: array
                              items:
                                  type: string
                        - name: ram[]
                          in: query
                          description: RAM size filter in GB (e.g., 2GB, 4GB, 8GB, 16GB, 32GB, 64GB)
                          required: false
                          schema:
                              type: array
                              items:
                                  type: string
                        - name: hddType
                          in: query
                          description: HDD type filter (SAS, SATA, or SSD)
                          required: false
                          schema:
                              type: string
                              enum: [SAS, SATA, SSD]
                        - name: location
                          in: query
                          description: Location filter
                          required: false
                          schema:
                              type: string
                        - name: page
                          in: query
                          description: Page number (default 1)
                          required: false
                          schema:
                              type: integer
                              default: 1
                        - name: limit
                          in: query
                          description: Items per page (default 20, max 100)
                          required: false
                          schema:
                              type: integer
                              default: 20
                              maximum: 100
                        - name: priceMin
                          in: query
                          description: Minimum price filter (in EUR)
                          required: false
                          schema:
                              type: number
                              minimum: 0
                        - name: priceMax
                          in: query
                          description: Maximum price filter (in EUR)
                          required: false
                          schema:
                              type: number
                              minimum: 0
                        - name: sort
                          in: query
                          description: Sort field
                          required: false
                          schema:
                              type: string
                              enum: [price, ram, storage, model]
                              default: price
                        - name: order
                          in: query
                          description: Sort order
                          required: false
                          schema:
                              type: string
                              enum: [asc, desc]
                              default: asc
                    responses:
                        '200':
                            description: Successful response with server list
                            content:
                                application/json:
                                    schema:
                                        type: object
                                        properties:
                                            data:
                                                type: array
                                                items:
                                                    $ref: '#/components/schemas/Server'
                                            meta:
                                                $ref: '#/components/schemas/PaginationMeta'
                                            filters:
                                                type: object
                                                description: Applied filters
            /api/servers/{id}:
                get:
                    operationId: api_servers_show
                    summary: Get server details
                    description: Returns details of a specific server
                    tags:
                        - Servers
                    parameters:
                        - name: id
                          in: path
                          description: Server ID
                          required: true
                          schema:
                              type: integer
                    responses:
                        '200':
                            description: Successful response with server details
                            content:
                                application/json:
                                    schema:
                                        type: object
                                        properties:
                                            data:
                                                $ref: '#/components/schemas/Server'
                        '404':
                            description: Server not found
                            content:
                                application/json:
                                    schema:
                                        type: object
                                        properties:
                                            error:
                                                type: string
                                                example: Server not found
                                            status:
                                                type: integer
                                                example: 404
            /api/filters:
                get:
                    operationId: api_filters
                    summary: Get available filter options
                    description: Returns all available filter options for the server list
                    tags:
                        - Filters
                    responses:
                        '200':
                            description: Successful response with filter options
                            content:
                                application/json:
                                    schema:
                                        type: object
                                        properties:
                                            data:
                                                $ref: '#/components/schemas/FilterOptions'
        components:
            schemas:
                Server:
                    type: object
                    description: Server entity
                    properties:
                        id:
                            type: integer
                            description: Unique server identifier
                            example: 1
                        model:
                            type: string
                            description: Server model name
                            example: Dell R210Intel Xeon X3440
                        ram:
                            type: string
                            description: RAM specification (raw)
                            example: 16GBDDR3
                        ramSizeGb:
                            type: integer
                            description: RAM size in gigabytes
                            example: 16
                        hdd:
                            type: string
                            description: HDD specification (raw)
                            example: 2x2TBSATA2
                        storageTotalGb:
                            type: integer
                            description: Total storage capacity in gigabytes
                            example: 4000
                        hddType:
                            type: string
                            description: HDD type
                            enum: [SAS, SATA, SSD]
                            example: SATA
                        location:
                            type: string
                            description: Data center location
                            example: AmsterdamAMS-01
                        price:
                            type: number
                            format: float
                            description: Server price per month
                            example: 49.99
                        currency:
                            type: string
                            description: Price currency code
                            example: EUR
                        formattedPrice:
                            type: string
                            description: Formatted price with currency symbol
                            example: â‚¬49.99
                PaginationMeta:
                    type: object
                    description: Pagination metadata
                    properties:
                        total:
                            type: integer
                            description: Total number of items
                            example: 486
                        page:
                            type: integer
                            description: Current page number
                            example: 1
                        limit:
                            type: integer
                            description: Items per page
                            example: 20
                        totalPages:
                            type: integer
                            description: Total number of pages
                            example: 25
                        hasNextPage:
                            type: boolean
                            description: Whether there is a next page
                            example: true
                        hasPrevPage:
                            type: boolean
                            description: Whether there is a previous page
                            example: false
                        sort:
                            type: string
                            description: Current sort field
                            example: price
                        order:
                            type: string
                            description: Current sort order
                            example: asc
                FilterOptions:
                    type: object
                    description: Available filter options
                    properties:
                        storage:
                            type: array
                            description: Available storage ranges
                            items:
                                type: object
                                properties:
                                    label:
                                        type: string
                                        example: 0-250GB
                                    min:
                                        type: integer
                                        example: 0
                                    max:
                                        type: integer
                                        example: 250
                        ram:
                            type: array
                            description: Available RAM sizes
                            items:
                                type: object
                                properties:
                                    label:
                                        type: string
                                        example: 16GB
                                    value:
                                        type: integer
                                        example: 16
                        hddType:
                            type: array
                            description: Available HDD types
                            items:
                                type: string
                            example: [SAS, SATA, SSD]
                        location:
                            type: array
                            description: Available locations
                            items:
                                type: string
                            example: [AmsterdamAMS-01, Washington D.C.WDC-01, San FranciscoSFO-12]
    areas:
        default:
            path_patterns:
                - ^/api(?!/doc$)
            disable_default_routes: true
